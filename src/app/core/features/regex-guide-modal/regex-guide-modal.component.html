<mat-horizontal-stepper linear #stepper>
  <!-- Passo 1: Introdu√ß√£o -->
  <mat-step [stepControl]="introForm">
    <form [formGroup]="introForm" aria-label="Introdu√ß√£o ao guia de regex">
      <ng-template matStepLabel></ng-template>
      <h2>Bem-vindo ao Guia Interativo de Regex</h2>
      <p>
        Este guia vai te ajudar a aprender o b√°sico de Express√µes Regulares (Regex), uma ferramenta poderosa para validar e manipular textos.
      </p>
      <p>Vamos come√ßar?</p>

      <!-- Quiz simples -->
      <p><strong>Voc√™ j√° usou Regex antes?</strong></p>
      <mat-radio-group formControlName="usedRegex" aria-label="Quiz: voc√™ j√° usou Regex antes?">
        <mat-radio-button value="sim">Sim</mat-radio-button>
        <mat-radio-button value="n√£o">N√£o</mat-radio-button>
      </mat-radio-group>

      <div class="step-buttons">
        <button mat-button matStepperNext [disabled]="!introForm.valid" aria-label="Pr√≥ximo passo">
          Pr√≥ximo
        </button>
      </div>
    </form>
  </mat-step>

  <!-- Passo 2: O que √© Regex? -->
  <mat-step [stepControl]="oQueEForm">
    <form [formGroup]="oQueEForm" aria-label="O que √© Regex?">
      <ng-template matStepLabel></ng-template>
      <h2>O que √© Regex?</h2>
      <p>
        Regex (Express√£o Regular) √© uma sequ√™ncia de caracteres que forma um padr√£o para encontrar ou validar textos.
      </p>
      <p>Muito usado para exemplos pr√°ticos como:</p>
      <ul>
        <li>Validar se um e-mail est√° no formato correto.</li>
        <br>
        <li>Encontrar n√∫meros de telefone em textos.</li>
        <br>
        <li>Substituir padr√µes em c√≥digos ou documentos.</li>
      </ul>

      <mat-checkbox formControlName="understoodConcept" aria-label="Checkbox para confirmar entendimento do conceito">Entendi o conceito</mat-checkbox>

      <div class="step-buttons">
        <button mat-button matStepperPrevious aria-label="Voltar passo">Voltar</button>
        <button mat-button matStepperNext [disabled]="!oQueEForm.valid" aria-label="Pr√≥ximo passo">
          Pr√≥ximo
        </button>
      </div>
    </form>
  </mat-step>

  <!-- Passo 3: Lendo Regex (Sintaxe B√°sica) -->
  <mat-step [stepControl]="lendoRegexForm">
    <form [formGroup]="lendoRegexForm" aria-label="Lendo a sintaxe b√°sica de regex">
      <ng-template matStepLabel></ng-template>
      <h2>Como ler uma Regex</h2>
      <p>Cada caractere ou grupo tem um significado. Veja os mais comuns abaixo, com exemplos:</p>
      <ul>
        <li *ngFor="let item of syntaxGuide">
          <code>{{ item.pattern }}</code>: {{ item.description }}
          <div class="example" aria-live="polite" style="font-style: italic; color: #555;">
            Exemplo: <strong>{{ item.example }}</strong>
          </div>
        </li>
      </ul>

      <mat-checkbox formControlName="understoodReading" aria-label="Checkbox para confirmar entendimento da sintaxe">Entendi a sintaxe b√°sica</mat-checkbox>

      <div class="step-buttons">
        <button mat-button matStepperPrevious aria-label="Voltar passo">Voltar</button>
        <button mat-button matStepperNext [disabled]="!lendoRegexForm.valid" aria-label="Pr√≥ximo passo">
          Pr√≥ximo
        </button>
      </div>
    </form>
  </mat-step>

  <!-- Passo 4: Quantificadores -->
  <mat-step [stepControl]="quantificadoresForm">
    <form [formGroup]="quantificadoresForm" aria-label="Entendendo quantificadores em regex">
      <ng-template matStepLabel></ng-template>
      <h2>Quantificadores</h2>
      <p>Eles indicam quantas vezes um caractere ou grupo pode aparecer. Exemplos:</p>
      <ul>
        <li *ngFor="let item of quantifierGuide">
          <code>{{ item.pattern }}</code>: {{ item.description }}
          <div class="example" aria-live="polite" style="font-style: italic; color: #555;">
            Exemplo: <strong>{{ item.example }}</strong>
          </div>
        </li>
      </ul>

      <mat-checkbox formControlName="understoodQuantifiers" aria-label="Checkbox para confirmar entendimento dos quantificadores">Entendi os quantificadores</mat-checkbox>

      <div class="step-buttons">
        <button mat-button matStepperPrevious aria-label="Voltar passo">Voltar</button>
        <button mat-button matStepperNext [disabled]="!quantificadoresForm.valid" aria-label="Pr√≥ximo passo">
          Pr√≥ximo
        </button>
      </div>
    </form>
  </mat-step>

  <!-- Passo 5: O Gerador -->
  <mat-step [stepControl]="geradorForm">
    <form [formGroup]="geradorForm" aria-label="Usando o gerador de regex">
      <ng-template matStepLabel></ng-template>
      <h2>Usando o Gerador</h2>
      <p>
        Agora que voc√™ conhece o b√°sico, use a se√ß√£o Gerador Guiado na tela principal para criar regex.
      </p>
      <p>
        Selecione um padr√£o (e-mail, CPF, etc.) e veja a regex gerada, com explica√ß√µes detalhadas.
      </p>

      <mat-checkbox formControlName="understoodGenerator" aria-label="Checkbox para confirmar entendimento do gerador">Entendi como usar o Gerador</mat-checkbox>

      <div class="step-buttons">
        <button mat-button matStepperPrevious aria-label="Voltar passo">Voltar</button>
        <button mat-button matStepperNext [disabled]="!geradorForm.valid" aria-label="Pr√≥ximo passo">
          Pr√≥ximo
        </button>
      </div>
    </form>
  </mat-step>

  <!-- Passo 6: O Testador -->
  <mat-step [stepControl]="testadorForm">
    <form [formGroup]="testadorForm" aria-label="Usando o testador de regex">
      <ng-template matStepLabel></ng-template>
      <h2>Usando o Testador</h2>
      <p>
        Depois de gerar sua regex, cole qualquer texto e a ferramenta ir√° validar se ele corresponde ao padr√£o.
      </p>
      <p>
        Voc√™ ver√° se o texto √© v√°lido (‚úÖ), tem correspond√™ncias (üîç) ou inv√°lido (‚ùå).
      </p>

      <mat-checkbox formControlName="understoodTester" aria-label="Checkbox para confirmar entendimento do testador">Entendi como usar o Testador</mat-checkbox>

      <div class="step-buttons">
        <button mat-button matStepperPrevious aria-label="Voltar passo">Voltar</button>
        <button mat-button matStepperNext [disabled]="!testadorForm.valid" aria-label="Pr√≥ximo passo">
          Pr√≥ximo
        </button>
      </div>
    </form>
  </mat-step>

  <!-- Passo 7: Pr√°tica -->
  <mat-step [stepControl]="praticaForm">
    <form [formGroup]="praticaForm" aria-label="Pr√°tica com regex de e-mail">
      <ng-template matStepLabel></ng-template>
      <h2>Pr√°tica: Valida√ß√£o de e-mail</h2>
      <p>Tente digitar um e-mail que combine com esta regex:</p>
      <p>
        <strong>Regex de e-mail:</strong> <code>{{ emailRegex }}</code>
      </p>
      <mat-form-field appearance="fill">
        <mat-label>Digite um e-mail v√°lido</mat-label>
        <input matInput formControlName="practiceAnswer" placeholder="exemplo@dominio.com" aria-describedby="emailHelp" />
        <mat-error *ngIf="praticaForm.get('practiceAnswer')?.invalid && praticaForm.get('practiceAnswer')?.touched">
          Formato de e-mail inv√°lido
        </mat-error>
      </mat-form-field>
      <small id="emailHelp" class="email-help-text">Exemplo: {{emailExample}}</small>

      <div class="feedback" aria-live="polite" style="margin-top: 1em;">
        <span *ngIf="praticaForm.valid">
          Resultado:
          <strong *ngIf="checkPractice(); else wrong">Correto ‚úîÔ∏è</strong>
          <ng-template #wrong>
            <span style="color: red">N√£o corresponde ‚ùå</span>
          </ng-template>
        </span>
      </div>

      <div class="step-buttons">
        <button mat-button matStepperPrevious aria-label="Voltar passo">Voltar</button>
        <button mat-button (click)="closeModal()" [disabled]="!checkPractice()" aria-label="Finalizar guia">
          Finalizar
        </button>
      </div>
    </form>
  </mat-step>
</mat-horizontal-stepper>